{% extends "base.html" %}
{% block title %}File Upload {% endblock %}

{% block content %}
<h1>File Upload</h1>
<div class="row">
  <form hx-post="{{ url_for('identify_file') }}" hx-encoding='multipart/form-data' id='upload'>
    <input type='file' name='file'>
    <button>
      Upload
    </button>
    <progress id='progress' value='0' max='100'></progress>
  </form>
</div>
<hr />
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
  htmx.on('#upload', 'htmx:xhr:progress', function (evt) {
    htmx.find('#progress').setAttribute('value', evt.detail.loaded / evt.detail.total * 100)
  });
</script>
{% endblock %}
